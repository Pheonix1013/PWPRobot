<!--Set up basic stuff for html file to work-->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!--Make title-->
  <title>PWP Robot Control</title>
</head>
<body>
  <!--Set up 4 quadrant lines and borders-->
  <table border="1" width="100%" height="100%">
    <tr height="50%">
      <td width="50%" align="center" valign="middle">
        <h3>Placeholder (top-left)</h3>
      </td>

      <td width="50%" align="center" valign="middle">
        <table>
          <tr align="center">
            <td></td>
            <!--Make all the buttons send their respective command (the fucntion is defined below)-->
            <td><button onclick="sendCommand('forward')">&#8593;</button></td> <!-- ↑ -->
            <td></td>
          </tr>
          <tr align="center">
            <td><button onclick="sendCommand('left')">&#8592;</button></td> <!-- ← -->
            <td><button onclick="stopMotor()">&#9632;</button></td> <!-- ■ -->
            <td><button onclick="sendCommand('right')">&#8594;</button></td> <!-- → -->
          </tr>
          <tr align="center">
            <td></td>
            <td><button onclick="sendCommand('backward')">&#8595;</button></td> <!-- ↓ -->
            <td></td>
          </tr>
        </table>
      </td>
    </tr>

    <tr height="50%">
      <td width="50%" align="center" valign="middle">
        <!--Finish bottom two quadrants-->
        <h3>Placeholder (bottom-left)</h3>
      </td>
      <td width="50%" align="center" valign="middle">
        <h3>Placeholder (bottom-right)</h3>
      </td>
    </tr>
  </table>

  <script>
    //Javascript stuff
    //Set API variable
    const API_BASE = "http://127.0.0.1:5000";

    async function sendCommand(direction) {
      /*
      Thsi function sends the command to the api

      Parameters:
      direction - string

      Return:
      None
      */
      try {
        const response = await fetch(`${API_BASE}/${direction}`, {
          method: "POST",
          headers: { "Content-Type": "application/json" }
        });
        const data = await response.json();
        console.log("Response:", data);
      } catch (error) {
        console.error("Error sending command:", error);
      }
    }

    async function stopMotor() {
      /*
      Seperate function for the purpose of stopping the motors

      Parameters:
      None - because there is no direction needed for stop

      Return:
      None
      */
      try {
        const response = await fetch(`${API_BASE}/stop`, {
          method: "POST",
          headers: { "Content-Type": "application/json" }
        });
        const data = await response.json();
        console.log("Response:", data);
      } catch (error) {
        console.error("Error sending command:", error);
      }
    }

  </script>
</body>
</html>
